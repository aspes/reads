# Scala Caprese project - Capabilities and Resources for Effects

The Scala Caprese project, short for Capabilities and Resources for Effects, is a major research initiative led by Scala's creator, Martin Odersky, at EPFL. The project's goal is to introduce first-class language support for managing and tracking side effects and resource usage at the type level. 
This project builds upon existing work in Scala 3, including: 
- Context functions: For abstracting over capability passing.
- Capture checking: To enforce which capabilities a lambda or object can close over. 

## Core capabilities
- __Type-level effect tracking__: Caprese aims to extend Scala's type system to statically track side effects and resource access. This allows the compiler to guarantee at compile-time that certain operations, like accessing a file, are only performed with the proper permissions, known as "capabilities".
- **Sound resource management**: Using capabilities, the system can prevent resource leaks by ensuring that resources are not allowed to "escape" their designated scope. The type system can guarantee, for example, that a file is properly closed after it is used within a certain block of code.
- **Direct-style effect handling**: The project explores providing a more "direct-style" or imperative way of writing effectful code, similar to Rust, without requiring complex monadic wrapping like Future or IO. This could improve ergonomics and potentially bridge the gap for developers less familiar with pure functional programming patterns.
- __Enhanced safety for low-level code__: By applying static guarantees about mutability and resource access, Caprese is designed to make low-level imperative code safer without needing a runtime interpreter.
- __Algebraic effect system primitives__: The research involves developing primitives for a compositional capabilities ecosystem that could also improve existing libraries like Cats Effect. 

## Goals and motivations
The Caprese project seeks to solve long-standing challenges in programming language design, specifically: 
- __Ecosystem fragmentation__: By providing a standard, language-level way to handle effects and resources, Caprese could reduce the need for multiple, competing effect systems in the Scala ecosystem.
- __Improved safety and productivity__: The project's innovations are intended to foster safer and more productive programming by catching errors at compile time instead of runtime.
- __Reduced complexity__: Some approaches, like "direct-style" effects, are meant to be easier for engineers to adopt and debug.

## Status and outlook
Caprese is a long-term research project funded by the Swiss National Fund. 
It is a high-level research effort rather than a specific feature scheduled for an immediate Scala release. 
While some early concepts like context functions and capture checking are already part of Scala 3, the full vision of Caprese 
is a significant, multi-year undertaking. 

The ultimate impact of the project is a subject of active discussion in the Scala community. 
Some believe it could dramatically change the language and its libraries, while others are cautiously 
awaiting more concrete examples and documentation. Some critics express concern about the project's potential 
to introduce breaking changes and add complexity, similar to the transition from Scala 2 to Scala 3. 
However, supporters and Odersky's team believe the direction makes a lot of sense for building safer and more performant solutions in the future. 
